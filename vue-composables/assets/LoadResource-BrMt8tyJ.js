import{E as e,G as t,K as n,L as r,N as i,P as a,R as o,X as s,g as c,k as l,q as u,y as d}from"./index-DGLLU8Ht.js";import{t as f}from"./ChartBar-ybY_iHJR.js";async function p(e,t,n={}){let{force:r=!1}=n;return!r&&h(e)?Promise.resolve():new Promise((n,r)=>{let i;if(t===`js`)i=document.createElement(`script`),i.type=`text/javascript`,i.src=e,i.async=!0;else if(t===`css`)i=document.createElement(`link`),i.rel=`stylesheet`,i.href=e;else{r(Error(`不支持的资源类型: ${t}`));return}i.onload=()=>{g(e),n()},i.onerror=()=>{r(Error(`加载资源失败: ${e}`))},document.head.appendChild(i)})}var m=new Set;function h(e){return m.has(e)}function g(e){m.add(e)}function _(){let e=n(!1),r=n(null);async function i(t,n,i){if(e.value){console.warn(`已有资源正在加载中`);return}e.value=!0,r.value=null;try{await p(t,n,i)}catch(e){throw r.value=e instanceof Error?e:Error(String(e)),r.value}finally{e.value=!1}}async function a(t,n){e.value=!0,r.value=null;try{let e=t.map(({url:e,type:t,options:r})=>p(e,t,{...n,...r}));await Promise.all(e)}catch(e){throw r.value=e instanceof Error?e:Error(String(e)),r.value}finally{e.value=!1}}return{loading:t(e),error:t(r),load:i,loadAll:a}}function v(e,t,n=`#app-cmp`){let r=null;typeof n==`string`?(r=document.querySelector(n),r||(console.warn(`Container "${n}" not found, creating a new div.`),r=document.createElement(`div`),r.id=`app-cmp`,r.style.display=`none`,document.body.appendChild(r))):n instanceof HTMLElement?r=n:(r=document.createElement(`div`),document.body.appendChild(r));let i=a(e,t),o=d({render(){return i}});return o.mount(r),{unmount:()=>{r.parentElement&&(o.unmount(),r.parentElement.removeChild(r))},app:o,vnode:i,el:i.el}}function y(e,t){let{cmp:n,...r}=e,{unmount:i,el:a}=v(e.cmp,t);new WinBox({title:e.title||`弹框`,width:e.width||`60%`,height:e.height||`80%`,mount:a,...r,onclose(){i()}})}var b={key:0},x={key:1},S={key:2},C=c(i({__name:`LoadResource`,setup(t){let{loadAll:n,loading:i,error:a}=_(),c=[{url:`https://rawcdn.githack.com/nextapps-de/winbox/0.2.82/dist/js/winbox.min.js`,type:`js`},{url:`https://rawcdn.githack.com/nextapps-de/winbox/0.2.82/dist/css/winbox.min.css`,type:`css`},{url:`https://nextapps-de.github.io/winbox/dist/css/themes/modern.min.css`,type:`css`}];r(async()=>{try{await n(c)}catch(e){console.error(`资源加载失败:`,e)}});let d=()=>{y({cmp:f,class:[`modern`],width:800,height:600,x:`center`,y:`center`},{title:`柱状图`,autoRefresh:!0,interval:1e3})};return(t,n)=>(o(),l(`div`,null,[e(`button`,{onClick:d},`打开图表`),u(i)?(o(),l(`p`,b,`正在加载外部资源...`)):u(a)?(o(),l(`p`,x,`加载失败：`+s(u(a).message),1)):(o(),l(`p`,S,`资源已就绪`))]))}}),[[`__scopeId`,`data-v-5d980644`]]);export{C as default};